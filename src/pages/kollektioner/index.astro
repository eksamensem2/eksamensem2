---
// Hent data fra API
const response = await fetch("https://socvoibygqltdglscttm.supabase.co/rest/v1/listeview_card", {
  method: "GET",
  headers: {
    apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvY3ZvaWJ5Z3FsdGRnbHNjdHRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM5MTg4NTksImV4cCI6MjA0OTQ5NDg1OX0.k-0jnIHYJuGx-8HeMip4kxl1phEdqwn1oct3VcV9yWE",
  },
});

const data = await response.json();
console.log(data);

// Gentag data for at sikre 10 kort
const repeatedData = Array.from({ length: 10 }, (_, i) => data[i % data.length]);

import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";
import Header from "../../components/Header.astro";
import Image from "astro/components/Image.astro"


---
<Layout/>
<Header/>


<section class="grid_3">
    {repeatedData.map((item, index) => {
        console.log("img: ", item.img)
        return (
      <div class="card" key={index}>
        <div class="card-image">
          <img src={`/image/${item.img}`} alt={item.description} />
        </div>
        <div class="card-content">
            <h3>{item.titel}</h3>
          <h3>Pris: {item.price} kr.</h3>
          <p>{item.description}</p>
               
          </div>
      </div>)}
    )}
</section>

<style>

.card {
  display: flex;
  flex-direction: column;
  align-items: center;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
}

.card-image img {
  width: 100%;
  height: auto;
}

.card-content {
  /* padding: 16px;
  text-align: center; */
  
  display: flex;
padding: 16px 24px;
flex-direction: column;
align-items: flex-start;
gap: 24px;
align-self: stretch;
}

h3 {
  margin: 0;
  font-size: 1.2rem;
}

p {
  margin-top: 8px;
  color: #555;
}

h1,
h2,
h3,
.subheadline,
p {
  color: var(--text-clr);
  line-height: 1.2;
}

h3 {
  font-size: var(--fs-l);
}

.subheadline {
  font-size: var(--fs-m);
}

p {
  font-size: var(--fs-xxs);
}

@media (min-width: 500px) {
  
.grid_3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

}
@media (max-width: 678px) {

h3 {
    font-size: var(--mfs-m);
  }

  p {
    font-size: var(--mfs-s);
  }

  .subheadline {
    font-size: var(--mfs-m);
  }
}
</style>
