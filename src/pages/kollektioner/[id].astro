---
// import Layout from "../layouts/Layout.astro";
// import Footer from "../components/Footer.astro";
// import Header from "../components/Header.astro";

export async function getStaticPaths() {
  const artists = await fetch(
    "https://socvoibygqltdglscttm.supabase.co/rest/v1/listeview_card?limit=10",
    {
      headers: {
        apikey:
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvY3ZvaWJ5Z3FsdGRnbHNjdHRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM5MTg4NTksImV4cCI6MjA0OTQ5NDg1OX0.k-0jnIHYJuGx-8HeMip4kxl1phEdqwn1oct3VcV9yWE",
      },
    },
  ).then((res) => res.json());

  return artists.map((product) => ({
    params: { id: product.id }, // [product]=product.slug
    props: { product }, // send al data med som props
  }));
}

const { product } = Astro.props;
---

<article class="product-card">
  <img
    src={`image/${product.img}`}
    alt={product.description}
    class="product-image"
  />
  <div class="product-details">
    <p class="collection">{product.kollektion}</p>
    <div>
      <h2>{product.titel}</h2>
      <span>{product.price}</span>
    </div>
    <p class="product-description">{product.description}</p>

    <div>
      <label for="quantity" class="quantity-label"><em>Antal</em></label>
      <input type="number" id="quantity" value < div />
    </div>
  </div>
</article>
